import{aq as o,ar as e}from"./index.dcdafb4c.js";const n=o("cart",{state:()=>({products:[{sn:"000001",name:"S-300HB",description:"XXXXXX",price:15820,stockQty:2,requireQty:0,remainQty:1,releaseDate:"",arriveDate:"2024/06/01",method:{sn:"000001",inList:!1}},{sn:"000002",name:"S-300HB",description:"XXXXXX",price:33930,stockQty:1,requireQty:0,remainQty:1,releaseDate:"",arriveDate:"2024/06/01",method:{sn:"000002",inList:!1}},{sn:"000003",name:"S-300HB",description:"XXXXXX",price:33330,stockQty:1,requireQty:0,remainQty:1,releaseDate:"",arriveDate:"2024/06/01",method:{sn:"000003",inList:!1}},{sn:"000004",name:"S-300HB",description:"XXXXXX",price:15260,stockQty:1,requireQty:0,remainQty:1,releaseDate:"",arriveDate:"2024/06/01",method:{sn:"000004",inList:!1}},{sn:"000005",name:"S-300HB",description:"XXXXXX",price:15260,stockQty:1,requireQty:0,remainQty:1,releaseDate:"",arriveDate:"2024/06/01",method:{sn:"000005",inList:!1}}],lists:[],total:{qty:0,price:0},productOptions:{state:{0:"\u5F85\u5831\u50F9",1:"\u53D6\u6D88",2:"\u5F85\u5BE9\u6838",3:"\u9810\u5B9A\u4E2D"},type:{0:"\u9810\u5B9A\u8A02\u55AE",1:"\u8A62\u50F9\u8A02\u55AE",2:"\u9700\u6C42\u8A02\u55AE"},location:{0:"\u6B50\u6D32\u5009\u5EAB",1:"\u53F0\u7063\u5009\u5EAB",2:"\u5176\u4ED6\u5009\u5EAB"}},orderHistory:[]}),getters:{countList(){return this.lists.length},locationOption:t=>{let i=[];for(let s in t.productOptions.location)i.push({label:t.productOptions.location[s],value:s});return i},typeOption:t=>{let i=[];for(let s in t.productOptions.type)i.push({label:t.productOptions.location[s],value:s});return i}},actions:{init(){this.initCartLists(),this.initProductList(),this.initOrderHistory()},initCartLists(){this.lists=this.initStorage("cart",this.lists)},initOrderHistory(){this.orderHistory=this.initStorage("order-history",this.orderHistory)},initStorage(t,i){return this.checkStorage(t,i),JSON.parse(e.getItem(t))},checkStorage(t,i){e.getItem(t)===null&&e.set(t,JSON.stringify(i))},updateList(t){this.lists=this.lists.filter(s=>s.sn!==t);let i=this.products.find(s=>s.sn===t);this.lists.push({sn:t,amount:1,price:i.price,description:i.description,name:i.name}),this.products.map(s=>{s.sn===t&&(s.method.inList=!0)}),this.updateTotal()},removeItem(t){this.lists=this.lists.filter(i=>i.sn!==t),this.products.map(i=>{i.sn===t&&(i.method.inList=!1)}),this.updateTotal()},increaseAmount(t){this.lists.map(i=>{i.sn===t.sn&&i.amount++}),this.updateTotal()},decreaseAmount(t){this.lists.map(s=>{s.sn===t.sn&&s.amount--});let i=this.lists.find(s=>s.amount===0);i&&this.removeItem(i.name),this.updateTotal()},updateTotal(){let t={qty:0,price:0};for(let i of this.lists)t.qty+=i.amount,t.price+=i.amount*i.price;this.total=t,e.set("cart",JSON.stringify(this.lists)),e.set("products",JSON.stringify(this.products))},initProductList(){this.checkStorage("products",this.products);let t=[];this.products.map(i=>{let s=this.lists.find(r=>r.sn===i.sn);s&&(i.method.inList=!0,t.push(s))}),this.lists=t,this.updateTotal()},availableAmount(t){let i=this.products.find(s=>s.sn===t);return i?i.remainQty:0},arriveDate(t){let i=this.products.find(s=>s.sn===t);return i?i.arriveDate:"--"},clearLists(){this.lists=[],this.products.map(t=>t.method.inList=!1),this.updateTotal()},updateOrderStorage(){e.set("order-history",JSON.stringify(this.orderHistory))},saveOrder(t){return this.orderHistory.push(t),this.updateOrderStorage(),this.clearLists(),!0},cancelOrder(t){this.orderHistory.map(i=>{i.no===t&&(i.state=1)}),this.updateOrderStorage()},updateOrder(t,i){this.orderHistory.map(s=>{s.no===t&&(s=i)}),this.updateOrderStorage()}}});export{n as u};
