import{ax as m,t as u,u as f,v as p,C as t,j as o,B as l,z as i,ay as _,az as g,F as x}from"./index.b353dbe4.js";import{Q as b}from"./QList.0d08150b.js";import{Q as y}from"./QMarkupTable.bc6dc270.js";import{Q as w}from"./QPage.644a8e2e.js";import{u as O,d as $}from"./cart.e76b3865.js";import{u as v}from"./auth.326bceef.js";import{api as k}from"./axios.9f03be50.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";const d=O(),D={name:"OrderDetailPage",data(){return{data:[],options:null,editable:null,detail:null}},async mounted(){await d.initOrderHistory().then(()=>{k.get(`/api/v1/get_order_detail?user_id=${v().getUid}&order_id=${this.$route.params.no}`).then(s=>{this.formateList(this.$route.params.no,s.data),this.data=d.orderHistory.find(e=>e.id==this.$route.params.no),this.data.order=this.formateList(this.$route.params.no,s.data),console.log(d.orderHistory),this.editable=this.data.contactDetail})})},methods:{formateList(s,e){const h=e.data,n=[];for(let a of h)n.push({sn_id:a.lot_id,sn:a.lot_name,pid:a.product_id,amount:a.product_qty,name:a.product_name,description:a.product_description,price:a.price_unit,warehouse_id:e.warehouse_id,warehouse_name:e.warehouse_name});return n},stateBadge(s){return s===1?"red":"blue"},convertTimestamp(s){return $.formatDate(s*1e3,"YYYY/MM/DD")},confirmedOrder(){d.confirmOrder(this.data.no),m.create({message:"Order Confirmed",color:"blue"})},cancelOrder(){d.cancelOrder(this.data.no),m.create({message:"Order Canceled",color:"red"})},updateOrder(){this.data.contactDetail=this.editable,this.data.contact=`${this.editable.name}/${this.editable.tel}`,d.updateOrder(this.data.no,this.data),m.create({message:"Detail Updated",color:"green"})}}},B={class:"full-width",style:{"max-width":"1200px"}},Q={class:"q-my-md flex"},L={class:"text-h4 q-ml-md"},q=t("thead",null,[t("tr",null,[t("th",{class:"text-left",width:"100"},"SN No."),t("th",{class:"text-left",width:"200"},"Name"),t("th",{class:"text-left"},"Description"),t("th",{class:"text-right",width:"150"},"Price (USD)"),t("th",{class:"text-right",width:"100"},"Qty.")])],-1),N={class:"text-left"},S={class:"text-left"},H={class:"text-left"},M=["innerHTML"],U={class:"text-right"},P={class:"text-right"},T={class:"row q-gutter-md q-my-md"};function Y(s,e,h,n,a,c){return u(),f(w,{padding:"",class:"flex justify-center"},{default:p(()=>[t("div",B,[t("div",Q,[o(l,{icon:"arrow_back_ios",color:"primary",label:"Back",onClick:e[0]||(e[0]=r=>s.$router.go(-1))}),t("span",L,"#"+i(a.data.no),1)]),o(b,{bordered:"",separator:""}),o(y,{flat:"",bordered:"",separator:"cell",class:"q-my-md"},{default:p(()=>[q,t("tbody",null,[(u(!0),_(x,null,g(a.data.order,r=>(u(),_("tr",{key:r},[t("td",N,"#"+i(r.sn),1),t("td",S,i(r.name),1),t("td",H,[t("div",{innerHTML:r.description},null,8,M)]),t("td",U,"USD$"+i(r.price),1),t("td",P,i(r.amount),1)]))),128))])]),_:1}),t("div",T,[o(l,{class:"col",color:"blue",label:"Confirm",onClick:e[1]||(e[1]=r=>c.confirmedOrder())}),o(l,{class:"col",color:"red",label:"Cancel",onClick:e[2]||(e[2]=r=>c.cancelOrder())}),o(l,{class:"col",color:"green",label:"Update",onClick:e[3]||(e[3]=r=>c.updateOrder())})])])]),_:1})}var J=C(D,[["render",Y]]);export{J as default};
