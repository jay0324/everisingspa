import{au as m,t as u,u as f,v as p,C as t,j as o,B as l,z as i,av as _,aw as g,F as x}from"./index.e2d4a23c.js";import{Q as b}from"./QList.95af0c5e.js";import{Q as y}from"./QMarkupTable.ed65abbd.js";import{Q as w}from"./QPage.c244552f.js";import{u as O}from"./cart.7330fa57.js";import{u as v}from"./auth.4817aac0.js";import{d as $}from"./date.16ac6d8b.js";import{api as k}from"./axios.51180271.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";const d=O(),D={name:"OrderDetailPage",data(){return{data:[],options:null,editable:null,detail:null}},async mounted(){await d.initOrderHistory().then(()=>{k.get(`/api/v1/get_order_detail?user_id=${v().getUid}&order_id=${this.$route.params.no}`).then(s=>{this.formateList(this.$route.params.no,s.data),this.data=d.orderHistory.find(e=>e.id==this.$route.params.no),this.data.order=this.formateList(this.$route.params.no,s.data),console.log(d.orderHistory),this.editable=this.data.contactDetail})})},methods:{formateList(s,e){const h=e.data,n=[];for(let r of h)n.push({sn_id:r.lot_id,sn:r.lot_name,pid:r.product_id,amount:r.product_qty,name:r.product_name,description:r.product_description,price:r.price_unit,warehouse_id:e.warehouse_id,warehouse_name:e.warehouse_name});return n},stateBadge(s){return s===1?"red":"blue"},convertTimestamp(s){return $.formatDate(s*1e3,"YYYY/MM/DD")},confirmedOrder(){d.confirmOrder(this.data.no),m.create({message:"Order Confirmed",color:"blue"})},cancelOrder(){d.cancelOrder(this.data.no),m.create({message:"Order Canceled",color:"red"})},updateOrder(){this.data.contactDetail=this.editable,this.data.contact=`${this.editable.name}/${this.editable.tel}`,d.updateOrder(this.data.no,this.data),m.create({message:"Detail Updated",color:"green"})}}},B={class:"full-width",style:{"max-width":"1200px"}},Q={class:"q-my-md flex"},L={class:"text-h4 q-ml-md"},q=t("thead",null,[t("tr",null,[t("th",{class:"text-left",width:"100"},"SN No."),t("th",{class:"text-left",width:"200"},"Name"),t("th",{class:"text-left"},"Description"),t("th",{class:"text-right",width:"150"},"Price (USD)"),t("th",{class:"text-right",width:"100"},"Qty.")])],-1),N={class:"text-left"},S={class:"text-left"},H={class:"text-left"},M=["innerHTML"],U={class:"text-right"},P={class:"text-right"},T={class:"row q-gutter-md q-my-md"};function Y(s,e,h,n,r,c){return u(),f(w,{padding:"",class:"flex justify-center"},{default:p(()=>[t("div",B,[t("div",Q,[o(l,{icon:"arrow_back_ios",color:"primary",label:"Back",onClick:e[0]||(e[0]=a=>s.$router.go(-1))}),t("span",L,"#"+i(r.data.no),1)]),o(b,{bordered:"",separator:""}),o(y,{flat:"",bordered:"",separator:"cell",class:"q-my-md"},{default:p(()=>[q,t("tbody",null,[(u(!0),_(x,null,g(r.data.order,a=>(u(),_("tr",{key:a},[t("td",N,"#"+i(a.sn),1),t("td",S,i(a.name),1),t("td",H,[t("div",{innerHTML:a.description},null,8,M)]),t("td",U,"USD$"+i(a.price),1),t("td",P,i(a.amount),1)]))),128))])]),_:1}),t("div",T,[o(l,{class:"col",color:"blue",label:"Confirm",onClick:e[1]||(e[1]=a=>c.confirmedOrder())}),o(l,{class:"col",color:"red",label:"Cancel",onClick:e[2]||(e[2]=a=>c.cancelOrder())}),o(l,{class:"col",color:"green",label:"Update",onClick:e[3]||(e[3]=a=>c.updateOrder())})])])]),_:1})}var K=C(D,[["render",Y]]);export{K as default};
