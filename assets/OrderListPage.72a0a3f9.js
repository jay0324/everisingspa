import{k as O,r as F,ai as A,aB as D,aC as I,o as N,h as L,l as U,g as j,b1 as M,N as R,R as z,ae as G,b2 as K,b3 as W,u as _,v as H,x as b,j as a,D as e,au as w,av as J,F as X,A as m,G as Y,b4 as B,ax as g,C as y,z as E,ay as Z}from"./index.461bbac5.js";import{Q as $}from"./QMarkupTable.4b5b362a.js";import{Q as ee}from"./QPage.c0a395b3.js";import{u as te}from"./cart.1fa3a280.js";import{_ as oe}from"./plugin-vue_export-helper.21dcd24c.js";var re=O({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:d,emit:v}){const c=j(),n=F(null);let f=0;const o=[];function h(t){const u=typeof t=="boolean"?t:s.noErrorFocus!==!0,x=++f,q=(r,l)=>{v(`validation${r===!0?"Success":"Error"}`,l)},P=r=>{const l=r.validate();return typeof l.then=="function"?l.then(i=>({valid:i,comp:r}),i=>({valid:!1,comp:r,err:i})):Promise.resolve({valid:l,comp:r})};return(s.greedy===!0?Promise.all(o.map(P)).then(r=>r.filter(l=>l.valid!==!0)):o.reduce((r,l)=>r.then(()=>P(l).then(i=>{if(i.valid===!1)return Promise.reject(i)})),Promise.resolve()).catch(r=>[r])).then(r=>{if(r===void 0||r.length===0)return x===f&&q(!0),!0;if(x===f){const{comp:l,err:i}=r[0];if(i!==void 0&&console.error(i),q(!1,l),u===!0){const V=r.find(({comp:Q})=>typeof Q.focus=="function"&&M(Q.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function C(){f++,o.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function S(t){t!==void 0&&R(t);const u=f+1;h().then(x=>{u===f&&x===!0&&(s.onSubmit!==void 0?v("submit",t):t!==void 0&&t.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function k(t){t!==void 0&&R(t),v("reset"),z(()=>{C(),s.autofocus===!0&&s.noResetFocus!==!0&&p()})}function p(){G(()=>{if(n.value===null)return;const t=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);t!=null&&t.focus({preventScroll:!0})})}A(K,{bindComponent(t){o.push(t)},unbindComponent(t){const u=o.indexOf(t);u!==-1&&o.splice(u,1)}});let T=!1;return D(()=>{T=!0}),I(()=>{T===!0&&s.autofocus===!0&&p()}),N(()=>{s.autofocus===!0&&p()}),Object.assign(c.proxy,{validate:h,resetValidation:C,submit:S,reset:k,focus:p,getValidationComponents:()=>o}),()=>L("form",{class:"q-form",ref:n,onSubmit:S,onReset:k},U(d.default))}});const ae={name:"OrderListPage",setup(){const s=te(),{lists:d,total:v}=W(s);return{type:F("reserved"),cart:s,lists:d,total:v}},data(){return{orderType:"reserved"}}},se=e("h2",null,"Order List",-1),ne=e("thead",null,[e("tr",null,[e("th",{class:"text-left",width:"100"},"Name"),e("th",{class:"text-left"},"Description"),e("th",{class:"text-right",width:"100"},"Price (EUR)"),e("th",{class:"text-center",width:"200"},"Qty."),e("th",{class:"text-right",width:"100"},"Sub Total (EUR)"),e("th",{class:"text-right",width:"20"},"Delete")])],-1),le={class:"text-left"},ie={class:"text-left"},de={class:"text-right"},ce={class:"text-center"},ue={class:"q-pa-md inline"},fe={class:"text-right"},me={class:"text-right"},ve={class:"text-right"},he={colspan:"6"},pe={class:"text-center flex flex-center q-my-xl"},xe={class:"q-pa-md flex"},ye=e("strong",{class:"q-pa-sm"},"Type:",-1),_e={class:"q-gutter-sm"},be=e("div",{class:"q-px-sm"},[E(" Reserved Order: The inventory will be reserved for you for 7 days."),e("br"),E(" Confirmed Order: Will be shipped immediately. ")],-1);function ge(s,d,v,c,n,f){return _(),H(ee,{padding:""},{default:b(()=>[se,a($,{bordered:"",separator:"cell"},{default:b(()=>[ne,e("tbody",null,[(_(!0),w(X,null,J(c.lists,o=>(_(),w("tr",{key:o},[e("td",le,m(o.name),1),e("td",ie,m(o.description),1),e("td",de,"\u20AC"+m(o.price),1),e("td",ce,[a(y,{icon:"add",color:"grey",round:"",onClick:h=>c.cart.increaseAmount(o)},null,8,["onClick"]),e("span",ue,m(o.amount),1),a(y,{icon:"remove",color:"grey",round:"",onClick:h=>c.cart.decreaseAmount(o)},null,8,["onClick"])]),e("td",fe,"\u20AC"+m(o.price*o.amount),1),e("td",me,[a(y,{color:"grey",round:"",icon:"delete",onClick:Z(h=>c.cart.removeItem(o.name),["prevent"])},null,8,["onClick"])])]))),128)),e("tr",ve,[e("td",he,[e("div",null,"Total Qty.: "+m(c.cart.total.qty),1),e("div",null,"Total Price: \u20AC"+m(c.cart.total.price),1)])])])]),_:1}),a(Y,{color:"primary"}),e("div",pe,[a(re,{class:"q-gutter-md full-width text-left",style:{"max-width":"600px"}},{default:b(()=>[e("div",xe,[ye,e("div",null,[e("div",_e,[a(B,{modelValue:n.orderType,"onUpdate:modelValue":d[0]||(d[0]=o=>n.orderType=o),val:"reserved",label:"Reserved Order"},null,8,["modelValue"]),a(B,{modelValue:n.orderType,"onUpdate:modelValue":d[1]||(d[1]=o=>n.orderType=o),val:"confirmed",label:"Confirmed Order"},null,8,["modelValue"])]),be])]),a(g,{outlined:"",label:"Contact Name:"}),a(g,{outlined:"",label:"Contact Phone:"}),a(g,{outlined:"",label:"Remark:",type:"textarea"}),a(y,{label:"submit"})]),_:1})])]),_:1})}var Ve=oe(ae,[["render",ge]]);export{Ve as default};
