import{a as p,b as v,c as h,d as O}from"./QTable.34cb06f4.js";import{ax as g,u as t,v as i,x as r,j as s,ay as d,az as _,F as f,z as y,A as c,Q as m}from"./index.8e39932e.js";import{Q as C}from"./QBadge.485da644.js";import{Q}from"./QPage.7323a822.js";import{u as x}from"./cart.09103fbd.js";import{u as B}from"./preference.8c5d01e0.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import"./QList.3f7f1cde.js";import"./QMarkupTable.86482133.js";import"./QItem.87d750a5.js";import"./QItemLabel.a967efb7.js";import"./QMenu.74a15676.js";import"./axios.87b0f64a.js";import"./auth.6b626beb.js";const l=x(),b=l.productOptions,S=B(),T={name:"OrderHistoryPage",setup(){return S.loaderTrigger("pageLoader"),{columns:[{name:"no",label:"Order No.",align:"left",field:"no"},{name:"status",align:"left",label:"Status",field:"status",sortable:!0},{name:"location",align:"left",label:"Warehouse",field:"location",sortable:!0},{name:"contact",align:"left",label:"Contact Info.",field:"contact"},{name:"remark",align:"left",label:"Remark",field:"remark"},{name:"method",align:"right",label:"Operation",field:"method"}],cart:l,initialPagination:{sortBy:"desc",rowsPerPage:50}}},data(){return{state:b.state,status:{reserve:"Reserve",cancel:"Cancel",sale:"Sale",sent:"Quoted"},location:b.location}},mounted(){l.initOrderHistory()},methods:{stateBadge(a){return l.colorSchema.type.state},convertMessage(a){return a.field==="state"?this.state[a.value]:a.field==="status"?this.status[a.value]:a.field==="location"?this.location[a.value]:a.value},convertColor(a){return a.value===1?"text-red":"text-blue"},cancelOrder(a){l.cancelOrder(a),g.create({message:"Order Canceled",color:"red"})},confirmedOrder(a){l.confirmOrder(a),g.create({message:"Order Comfirmed",color:"blue"})}}},q={key:3},w={key:4};function H(a,N,D,u,M,n){return t(),i(Q,{padding:""},{default:r(()=>[s(v,{flat:"",rows:u.cart.orderHistory,columns:u.columns,"row-key":"name",pagination:u.initialPagination},{header:r(o=>[s(p,{props:o},{default:r(()=>[(t(!0),d(f,null,_(o.cols,e=>(t(),i(h,{key:e.name,props:o},{default:r(()=>[y(c(e.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:r(o=>[s(p,{props:o},{default:r(()=>[(t(!0),d(f,null,_(o.cols,e=>(t(),i(O,{key:e.name,props:o},{default:r(()=>[e.name==="method"&&e.value.status==="reserve"?(t(),d(f,{key:0},[s(m,{color:"grey",label:"Detail",class:"q-ma-sm",to:`order_detail/${e.value.id}`},null,8,["to"]),s(m,{color:"pink",label:"Cancel",class:"q-ma-sm",onClick:k=>n.cancelOrder(e.value.id)},null,8,["onClick"]),s(m,{color:"blue-9",label:"Confirm",class:"q-ma-sm",onClick:k=>n.confirmedOrder(e.value.id)},null,8,["onClick"])],64)):e.name==="method"&&e.value.status!=="reserve"?(t(),i(m,{key:1,color:"grey",label:"Detail",class:"q-ma-sm",to:`order_detail/${e.value.id}`},null,8,["to"])):e.name==="state"?(t(),i(C,{key:2,class:"q-pa-sm",color:n.stateBadge(e.value)},{default:r(()=>[y(c(n.convertMessage(e)),1)]),_:2},1032,["color"])):e.name==="no"?(t(),d("span",q,"#"+c(e.value),1)):(t(),d("span",w,c(n.convertMessage(e)),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])]),_:1})}var X=P(T,[["render",H]]);export{X as default};
