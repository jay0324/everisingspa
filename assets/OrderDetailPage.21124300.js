import{au as p,t as _,u as Q,v as t,C as l,j as e,B as f,z as n,y as d,az as h,av as x,aw as O,F as v}from"./index.4d4f1212.js";import{Q as u,a as r}from"./QItem.b194caaa.js";import{Q as C}from"./QBadge.e9041167.js";import{Q as y}from"./QItemLabel.d04aad24.js";import{Q as D}from"./QList.bebb5a29.js";import{Q as V}from"./QMarkupTable.1cc29848.js";import{Q as k}from"./QPage.3b65531b.js";import{u as w}from"./cart.f4214f18.js";import{d as B}from"./date.131c82d1.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.25b4c05a.js";import"./auth.f88e34b5.js";const m=w(),q={name:"OrderDetailPage",data(){const i=m.orderHistory.find(b=>b.no===this.$route.params.no),a=m.productOptions,g=i.contactDetail;return{data:i,options:a,editable:g}},methods:{stateBadge(i){return i===1?"red":"blue"},convertTimestamp(i){return B.formatDate(i*1e3,"YYYY/MM/DD")},confirmedOrder(){m.confirmOrder(this.data.no),p.create({message:"Order Confirmed",color:"blue"})},cancelOrder(){m.cancelOrder(this.data.no),p.create({message:"Order Canceled",color:"red"})},updateOrder(){this.data.contactDetail=this.editable,this.data.contact=`${this.editable.name}/${this.editable.tel}`,m.updateOrder(this.data.no,this.data),p.create({message:"Detail Updated",color:"green"})}}},S={class:"full-width",style:{"max-width":"1200px"}},T={class:"q-my-md flex"},U={class:"text-h4 q-ml-md"},L=l("thead",null,[l("tr",null,[l("th",{class:"text-left",width:"100"},"SN No."),l("th",{class:"text-left",width:"200"},"Name"),l("th",{class:"text-left"},"Description"),l("th",{class:"text-right",width:"150"},"Price (USD)"),l("th",{class:"text-right",width:"100"},"Qty.")])],-1),M={class:"text-left"},P={class:"text-left"},I={class:"text-left"},Y=["innerHTML"],H={class:"text-right"},j={class:"text-right"},z={class:"row q-gutter-md q-my-md"};function F(i,a,g,b,s,c){return _(),Q(k,{padding:"",class:"flex justify-center"},{default:t(()=>[l("div",S,[l("div",T,[e(f,{icon:"arrow_back_ios",color:"primary",label:"Back",onClick:a[0]||(a[0]=o=>i.$router.go(-1))}),l("span",U,"#"+n(s.data.no),1)]),e(D,{bordered:"",separator:""},{default:t(()=>[e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[d("Warehouse: ")]),_:1}),e(r,{side:""},{default:t(()=>[d(n(s.options.location[s.data.location]),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[d("Date: ")]),_:1}),e(r,{side:""},{default:t(()=>[d(n(c.convertTimestamp(s.data.date.order)),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[d("Type: ")]),_:1}),e(r,{side:""},{default:t(()=>[d(n(s.options.type[s.data.type]),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[d("State: ")]),_:1}),e(r,{side:""},{default:t(()=>[e(C,{class:"q-pa-sm",color:c.stateBadge(s.data.state)},{default:t(()=>[d(n(s.options.state[s.data.state]),1)]),_:1},8,["color"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[d("Contact Name: ")]),_:1}),e(r,{side:""},{default:t(()=>[e(h,{filled:"",modelValue:s.editable.name,"onUpdate:modelValue":a[1]||(a[1]=o=>s.editable.name=o),dense:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[d("Contact Phone: ")]),_:1}),e(r,{side:""},{default:t(()=>[e(h,{filled:"",modelValue:s.editable.tel,"onUpdate:modelValue":a[2]||(a[2]=o=>s.editable.tel=o),dense:"",class:"align-right"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[e(y,null,{default:t(()=>[d("Note:")]),_:1}),e(y,null,{default:t(()=>[e(h,{class:"q-my-sm",filled:"",modelValue:s.editable.message,"onUpdate:modelValue":a[3]||(a[3]=o=>s.editable.message=o),dense:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{flat:"",bordered:"",separator:"cell",class:"q-my-md"},{default:t(()=>[L,l("tbody",null,[(_(!0),x(v,null,O(s.data.order,o=>(_(),x("tr",{key:o},[l("td",M,"#"+n(o.sn),1),l("td",P,n(o.name),1),l("td",I,[l("div",{innerHTML:o.description},null,8,Y)]),l("td",H,"USD$"+n(o.price),1),l("td",j,n(o.amount),1)]))),128))])]),_:1}),l("div",z,[e(f,{class:"col",color:"blue",label:"Confirm",onClick:a[4]||(a[4]=o=>c.confirmedOrder())}),e(f,{class:"col",color:"red",label:"Cancel",onClick:a[5]||(a[5]=o=>c.cancelOrder())}),e(f,{class:"col",color:"green",label:"Update",onClick:a[6]||(a[6]=o=>c.updateOrder())})])])]),_:1})}var le=N(q,[["render",F]]);export{le as default};
